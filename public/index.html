<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Childcare Fact Sheet</title>
  <style>
    ul {
      background-color: #DDD;
    }
  </style>
  <script src="../node_modules/d3/dist/d3.min.js"></script>
  <script src="../data/brazos.sheet.js"></script>
  <script>
    function getChart(data, key, label){
      const values = data.map(d => d[key]);
      const x = d3.scaleLinear()
        .domain([0, d3.max(values)])
        .range([0, 420])
      // Create an empty (detached) chart container.
      const div = d3.create("div");

      // Apply some styles to the chart container.
      div.style("font", "10px sans-serif");
      div.style("text-align", "right");
      div.style("color", "white");

      // Define the initial (empty) selection for the bars.
      const bar = div.selectAll("div");

      // Bind this selection to the data (computing enter, update and exit).
      const barUpdate = bar.data(data);

      // Join the selection and the data, appending the entering bars.
      const barNew = barUpdate.join("div");

      // Apply some styles to the bars.
      barNew.style("background", "steelblue");
      barNew.style("padding", "3px");
      barNew.style("margin", "1px");

      // Set the width as a function of data.
      barNew.style("width", d => `${x(d[key])}px`);

      // Set the text of each bar as the data.
      barNew.text(d => d[key]);
      barNew.insert("span", ":first-child")
        .text(d => d[label])
        .style("float", "left");

      // Return the chart container.
      return div.node();
    }</script>
</head>
<body>
  <h1>Childcare Fact Sheet</h1>
  <h2>Brazos County households with children under 6 where both parents work</h2>
  <script>
    document.body.appendChild(getChart(Brazos_Sheet, 'H_Under6_BothWork', 'StudyYear'));
  </script>
  <h2>Links</h2>
  <ol>
    <li><a href="https://www.dol.gov/sites/dolgov/files/WB/media/stats/nationaldatabaseofchildcareprices.xlsx">https://www.dol.gov/sites/dolgov/files/WB/media/stats/nationaldatabaseofchildcareprices.xlsx</a></li>
    <li><a href="https://www.dol.gov/sites/dolgov/files/WB/media/NationalDatabaseofChildcarePricesTechnicalGuideFinal.pdf">https://www.dol.gov/sites/dolgov/files/WB/media/NationalDatabaseofChildcarePricesTechnicalGuideFinal.pdf</a></li>
    <li><a href="https://www.dol.gov/agencies/wb/topics/childcare">https://www.dol.gov/agencies/wb/topics/childcare</a></li>
  </ol>
</body>
</html>
